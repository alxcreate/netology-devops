# Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"

> 1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

Linux: 

    vagrant@vagrant:~$ ip link
    1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 08:00:27:a2:6b:fd brd ff:ff:ff:ff:ff:ff

Windows: 

    PS C:\Users\user> netsh interface show interface
    
    Состояние адм.  Состояние     Тип              Имя интерфейса
    ---------------------------------------------------------------------
    Разрешен       Подключен      Выделенный       VirtualBox Host-Only Network
    Разрешен       Отключен       Выделенный       Ethernet
    Разрешен       Подключен      Выделенный       Беспроводная сеть
    Разрешен       Отключен       Выделенный       Ethernet 2


> 2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

Используется протокол LLDP. 

    vagrant@vagrant:~$ sudo lldpctl
    -------------------------------------------------------------------------------
    LLDP neighbors:
    -------------------------------------------------------------------------------

> 3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

Используется технология виртуальных сетей VLAN. В Linux применяется пакет vlan.

Пример конфигурации:

    network:
    version: 2
    ethernets:
    ens3:
    addresses:
    - 192.168.0.22/24
    gateway4: 192.168.0.1
    nameservers:
    addresses: [192.168.0.1]
    ens8: {}
    
        vlans:
            vlan.101:
                id: 101
                link: ens8
                addresses: [192.168.101.1/24]

> 4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

Агрегация интерфесов бывает LAG (ручная) и LACP (динамическая.)

Для балансировки используются опции:

0 - balance-rr - (round-robin) - режим циклического выбора активного интерфейса для исходящего трафика;

1 - active-backup - активен только один интерфейс, остальные в режиме горячей замены;

2 - balance-xor - режим, в котором каждый получатель закрепляется за одним из физических интерфейсов, который выбирается по специальной формуле;

3 - broadcast - трафик идет через все интерфейсы одновременно;

4 - 802.3ad - (dynamic link aggregation) - в группу объединяются одинаковые по скорости и режиму интерфейсы;

5 - balance-tlb - (adaptive transmit load balancing) - исходящий трафик распределяется в соответствии с текущей нагрузкой на интерфейсах;

6 - balance-alb - (adaptive load balancing) - включает в себя balance-tlb, плюс балансировку на приём (rlb).

Пример кофигурации:

    auto bond0
    iface bond0 inet static
    address 192.168.0.22
    netmask 255.255.255.0
    gateway 192.168.0.1
    dns-nameservers 192.168.0.1
    dns-search domain.local
    slaves eth0 eth1
    bond_mode 0
    bond-miimon 100
    bond_downdelay 200
    bond_updelay 200

> 5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

В сети с маской /29 восемь адресов.

Из сети с маской /24 можно получить 256/8=32 сети.

Примеры сетей /29 внутри 10.10.10.0/24:

    10.10.10.16/29
    10.10.10.80/29
    10.10.10.136/29
    10.10.10.248/29

> 6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

Допустимо использовать диапазон 100.64.0.0/10. Учитывая, что в сети предполагается 40-50 хостов, то целесообразно выбрать минимальный диапазон - /26. Можно выбарть сеть, например, 100.64.0.0/26

> 7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?

Проверка таблицы в Linux и Windows выполняется командой arp:

Linux:

    vagrant@vagrant:~$ arp -n
    Address                  HWtype  HWaddress           Flags Mask            Iface
    192.168.0.1              ether   48:3e:5e:d3:5f:00   C                     eth1
    10.0.2.3                 ether   52:54:00:12:35:03   C                     eth0
    10.0.2.2                 ether   52:54:00:12:35:02   C                     eth0

Windows:

    PS C:\Users\user> arp -a
    Интерфейс: 192.168.56.1 --- 0xc
    адрес в Интернете      Физический адрес      Тип
    192.168.56.255        ff-ff-ff-ff-ff-ff     статический
    224.0.0.2             01-00-5e-00-00-02     статический
    224.0.0.22            01-00-5e-00-00-16     статический

Очистка таблицы:

linux:

    vagrant@vagrant:~$ sudo ip neigh flush all
    vagrant@vagrant:~$ arp -n
    Address                  HWtype  HWaddress           Flags Mask            Iface
    10.0.2.2                 ether   52:54:00:12:35:02   C                     eth0

Windows:

    C:\Windows\system32>netsh interface IP delete arpcache
    ОК.
    PS C:\Users\user> arp -a
    
    Интерфейс: 192.168.56.1 --- 0xc
    адрес в Интернете      Физический адрес      Тип
    224.0.0.22            01-00-5e-00-00-16     статический